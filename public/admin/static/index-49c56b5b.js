import{a7 as e,b as a,r as t,e as l,a as n,h as o,i as r,w as s,f as u,o as i,l as d,A as p,m as c,n as g,W as m,j as h,a8 as f,z as v,a9 as b,aa as w,B as _,E as y,_ as C}from"./index-2fc42248.js";import{u as S}from"./usePagination-8650a726.js";const z={class:"app-container"},V=a({name:"Sentence"}),x=a({...V,props:{sentence:{type:Object,required:!0},showDialog:{type:Boolean,required:!0,default:!1}},emits:["update:showDialog","update:sentence","handleSubmit"],setup(e,{emit:a}){const c=e,g=t({isShowDialog:c.showDialog,loading:!1}),m=l((()=>c.sentence)),h=e=>{a("update:showDialog",!1),e()},f=n(null),v=t({author:[{required:!0,message:"作者不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}],translation:[{required:!0,message:"翻译不能为空",trigger:"blur"}]}),b=()=>{var e;null==(e=f.value)||e.validate((e=>{if(!e)return!1;a("update:sentence",m.value),a("handleSubmit")}))},w=()=>{a("update:showDialog",!1)};return(e,a)=>{const t=u("el-input"),l=u("el-form-item"),n=u("el-form"),c=u("el-button"),_=u("el-card"),y=u("el-dialog");return i(),o("div",z,[r(y,{modelValue:g.isShowDialog,"onUpdate:modelValue":a[3]||(a[3]=e=>g.isShowDialog=e),title:"分类","before-close":h},{default:s((()=>[r(_,{shadow:"never"},{default:s((()=>[r(n,{model:d(m),ref_key:"formRef",ref:f,"label-position":"right","label-width":"100px",rules:v},{default:s((()=>[r(l,{label:"作者：",prop:"author"},{default:s((()=>[r(t,{class:"form-input",modelValue:d(m).author,"onUpdate:modelValue":a[0]||(a[0]=e=>d(m).author=e),placeholder:"请输入作者"},null,8,["modelValue"])])),_:1}),r(l,{label:"内容：",prop:"content"},{default:s((()=>[r(t,{type:"textarea",class:"form-input",modelValue:d(m).content,"onUpdate:modelValue":a[1]||(a[1]=e=>d(m).content=e),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1}),r(l,{label:"翻译：",prop:"translation"},{default:s((()=>[r(t,{type:"textarea",class:"form-input",modelValue:d(m).translation,"onUpdate:modelValue":a[2]||(a[2]=e=>d(m).translation=e),placeholder:"请输入翻译"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),r(l,{style:{"padding-left":"100px"}},{default:s((()=>[r(c,{type:"primary",onClick:b},{default:s((()=>[p("保存")])),_:1}),r(c,{style:{"margin-left":"10px"},onClick:w},{default:s((()=>[p("取消")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}}),D={class:"app-container"},k={class:"toolbar-wrapper"},j={class:"table-wrapper"},P={class:"pager-wrapper"},U=a({name:"Sentences"}),q=C(a({...U,setup(a){const t=n(!1),{paginationData:l,handleCurrentChange:C,handleSizeChange:z}=S(),V=n(!1),U=n([]);c();const q={id:0,author:"",content:"",translation:""},O=n(Object.assign({},q)),A=()=>{var a,t;O.value.id>0?(a=O.value.id,t=O.value,e({url:`/sentence/${a}/update`,method:"post",data:t})).then((()=>{y.success("更新成功"),V.value=!1,E()})):function(a){return e({url:"/sentence/store",method:"post",data:a})}(O.value).then((()=>{y.success("添加成功"),V.value=!1,E()}))},B=a=>{var t;(t=a.id,e({url:`/sentence/${t}`,method:"delete"})).then((()=>{y.success("删除成功"),E()}))},E=()=>{var a;t.value=!0,(a={page:l.currentPage,pageSize:l.pageSize},e({url:"/sentence/list",method:"get",params:a})).then((e=>{l.total=e.data.total,U.value=e.data.list})).catch((()=>{U.value=[]})).finally((()=>{t.value=!1}))};return g([()=>l.currentPage,()=>l.pageSize],E,{immediate:!0}),(e,a)=>{const n=u("el-button"),c=u("el-table-column"),g=u("el-popconfirm"),y=u("el-table"),S=u("el-pagination"),E=u("el-card"),$=f("loading");return i(),o("div",D,[m((i(),h(E,{shadow:"never"},{default:s((()=>[v("div",k,[v("div",null,[r(n,{type:"primary",icon:d(b),onClick:a[0]||(a[0]=e=>(O.value=Object.assign({},q),void(V.value=!0)))},{default:s((()=>[p("新增句子")])),_:1},8,["icon"])])]),v("div",j,[r(y,{data:U.value,"row-key":"id",border:"","default-expand-all":""},{default:s((()=>[r(c,{prop:"author",label:"作者",align:"center",width:"150"}),r(c,{prop:"content",label:"内容"}),r(c,{prop:"translation",label:"翻译"}),r(c,{prop:"created_at",label:"创建时间",align:"center",width:"180"}),r(c,{fixed:"right",label:"操作",width:"130"},{default:s((({row:e})=>[r(n,{type:"primary",text:"",bg:"",size:"small",onClick:a=>(e=>{const{id:a,author:t,content:l,translation:n}=e;O.value={id:a,author:t,content:l,translation:n},V.value=!0})(e)},{default:s((()=>[p("编辑")])),_:2},1032,["onClick"]),r(g,{icon:d(w),"icon-color":"#626AEF",title:"真的要删除此条数据吗？",onConfirm:a=>B(e)},{reference:s((()=>[r(n,{type:"danger",text:"",bg:"",size:"small"},{default:s((()=>[p("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"]),V.value?(i(),h(x,{key:0,"show-dialog":V.value,"onUpdate:showDialog":a[1]||(a[1]=e=>V.value=e),sentence:O.value,"onUpdate:sentence":a[2]||(a[2]=e=>O.value=e),onHandleSubmit:A},null,8,["show-dialog","sentence"])):_("",!0)]),v("div",P,[r(S,{background:"",layout:d(l).layout,"page-sizes":d(l).pageSizes,total:d(l).total,"page-size":d(l).pageSize,currentPage:d(l).currentPage,onSizeChange:d(z),onCurrentChange:d(C)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[$,t.value]])])}}}),[["__scopeId","data-v-6e5570ea"]]);export{q as default};

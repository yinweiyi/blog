import{u as a}from"./usePagination-e9891ce3.js";import{d as e,u as l,g as t}from"./index-beaab5e1.js";import{b as n,a as i,m as o,n as r,h as s,W as d,j as u,w as p,f as c,a8 as g,o as h,z as m,i as f,A as w,l as b,a9 as v,t as _,aa as C,E as z,_ as y}from"./index-aa7cad08.js";const S={class:"app-container"},V={class:"toolbar-wrapper"},x={class:"table-wrapper"},A={class:"pager-wrapper"},k=n({name:"Articles"}),P=y(n({...k,setup(n){const y=i(!1),{paginationData:k,handleCurrentChange:P,handleSizeChange:j}=a(),U=i(!1),E=i([]),D=o(),F=()=>{D.push({name:"ArticleAdd"})},I=(a,e)=>{U.value=!0,l(a.id,{[e]:a[e]}).then((()=>{z.success("更新成功")})).finally((()=>{U.value=!1}))},W=()=>{y.value=!0,t({page:k.currentPage,pageSize:k.pageSize}).then((a=>{k.total=a.data.total,E.value=a.data.list})).catch((()=>{E.value=[]})).finally((()=>{y.value=!1}))};return r([()=>k.currentPage,()=>k.pageSize],W,{immediate:!0}),(a,l)=>{const t=c("el-button"),n=c("el-table-column"),i=c("el-tag"),o=c("el-switch"),r=c("el-popconfirm"),q=c("el-table"),B=c("el-pagination"),G=c("el-card"),H=g("loading");return h(),s("div",S,[d((h(),u(G,{shadow:"never"},{default:p((()=>[m("div",V,[m("div",null,[f(t,{type:"primary",icon:b(v),onClick:F},{default:p((()=>[w("新增文章")])),_:1},8,["icon"])])]),m("div",x,[f(q,{data:E.value},{default:p((()=>[f(n,{prop:"id",label:"id",align:"center",width:"60"}),f(n,{prop:"title",label:"标题"}),f(n,{label:"标识",width:"160"},{default:p((({row:a})=>[f(i,null,{default:p((()=>[w(_(a.slug),1)])),_:2},1024)])),_:1}),f(n,{prop:"author",label:"作者",align:"center",width:"80"}),f(n,{prop:"order",label:"排序",align:"center",sortable:"",width:"80"}),f(n,{prop:"views",label:"浏览量",align:"center",sortable:"",width:"100"}),f(n,{label:"分类名",align:"center",width:"100"},{default:p((({row:a})=>[f(i,null,{default:p((()=>[w(_(a.category.name),1)])),_:2},1024)])),_:1}),f(n,{label:"是否置顶",align:"center",width:"80"},{default:p((({row:a})=>[f(o,{modelValue:a.is_top,"onUpdate:modelValue":e=>a.is_top=e,class:"ml-2",loading:U.value,onChange:e=>I(a,"is_top")},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])])),_:1}),f(n,{label:"是否显示",align:"center",width:"80"},{default:p((({row:a})=>[f(o,{modelValue:a.is_show,"onUpdate:modelValue":e=>a.is_show=e,class:"ml-2",loading:U.value,onChange:e=>I(a,"is_show")},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])])),_:1}),f(n,{prop:"updated_at",label:"更新时间",align:"center",width:"160"}),f(n,{fixed:"right",label:"操作",width:"200",align:"center"},{default:p((a=>[f(t,{type:"default",text:"",bg:"",size:"small",onClick:e=>{return l=a.row,void D.push({name:"ArticleComment",params:{id:l.id}});var l}},{default:p((()=>[w("评论")])),_:2},1032,["onClick"]),f(t,{type:"primary",text:"",bg:"",size:"small",onClick:e=>{return l=a.row,void D.push({name:"ArticleEdit",params:{id:l.id}});var l}},{default:p((()=>[w("编辑")])),_:2},1032,["onClick"]),f(r,{icon:b(C),"icon-color":"#626AEF",title:"真的要删除此条数据吗？",onConfirm:l=>{return t=a.row,void e(t.id).then((()=>{z.success("删除成功"),W()}));var t}},{reference:p((()=>[f(t,{type:"danger",text:"",bg:"",size:"small"},{default:p((()=>[w("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"])]),m("div",A,[f(B,{background:"",layout:b(k).layout,"page-sizes":b(k).pageSizes,total:b(k).total,"page-size":b(k).pageSize,currentPage:b(k).currentPage,onSizeChange:b(j),onCurrentChange:b(P)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[H,y.value]])])}}}),[["__scopeId","data-v-070efbf0"]]);export{P as default};
